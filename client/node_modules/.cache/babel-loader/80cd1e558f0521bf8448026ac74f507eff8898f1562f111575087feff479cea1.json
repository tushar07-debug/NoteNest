{"ast":null,"code":"var _jsxFileName = \"D:\\\\NoteNest-Project\\\\client\\\\src\\\\components\\\\Billtocart.js\",\n  _s = $RefreshSig$();\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { useEffect, useState } from 'react';\nimport CheckoutForm from './Checkoutform';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Billtocart({\n  totalquantity,\n  totalamount,\n  length\n}) {\n  _s();\n  const [stripePromise, setStripePromise] = useState(null);\n  const [title, setTitle] = useState({});\n  const [author, setAuthor] = useState({});\n  const [price, setPrice] = useState('');\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    try {\n      if (price != '' && books != \"\") {} else {\n        throw 'cannot fetch data';\n      }\n    } catch (err) {\n      toast.error(err.message);\n    }\n  });\n  const handlePayment = async () => {\n    try {\n      const stripe = await loadStripe('pk_test_51PYiEkLDujIwOUvsgGqFINeRQthKav2sU01n3IGgcRMOR981s19NQMZc3le1nZM55AVHq9bZkApwr52nFX2ue4xG005EATf0Rw');\n      const user = sessionStorage.getItem('username');\n      //--------------------------------------------add books name function----------------------------------------------------------------------\n      // const response = await axios.post('http://localhost:3001/bill', { user });\n      // if (response.status === 200) {\n      // console.log(response.data);\n      // setBooks(response.data)\n      // const titles=books.map(item=>item.title);\n      // const authors=books.map(item=>item.author);\n      // response.data.forEach(item => {\n      //     titles[item.bookid]=item.title\n      //     authors[item.bookid]=item.author\n      // });\n      // setAuthor(authors);\n      // setTitle(titles);/\n      // console.log(title)\n      // console.log(titles)\n      // }\n      setStripePromise(stripe);\n    } catch (error) {\n      console.error('Error loading Stripe:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card mb-3 mt-2\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-primary fs-5 fw-bold\",\n        children: \"Price Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"me-auto\",\n          children: [\"Price (\", totalquantity, \" Books)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ms-auto\",\n          children: [\"Rs. \", totalamount]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"me-auto\",\n          children: \"Estimated Shipping\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ms-auto\",\n          children: [\"Rs. \", 10 * length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"me-auto\",\n          children: \"Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ms-auto\",\n          children: [\"Rs. \", totalamount + 10 * length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), stripePromise ? /*#__PURE__*/_jsxDEV(Elements, {\n        className: \"container-fluid\",\n        stripe: stripePromise,\n        children: /*#__PURE__*/_jsxDEV(CheckoutForm, {\n          price: totalamount + 10 * length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this)\n      }, 1, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-outline-danger p-3 mt-2\",\n        onClick: handlePayment,\n        children: \"Proceed to checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n}\n_s(Billtocart, \"DbCE0rijkwoIzdIoF3GjXiB+wag=\");\n_c = Billtocart;\nvar _c;\n$RefreshReg$(_c, \"Billtocart\");","map":{"version":3,"names":["Elements","loadStripe","useEffect","useState","CheckoutForm","toast","axios","jsxDEV","_jsxDEV","Billtocart","totalquantity","totalamount","length","_s","stripePromise","setStripePromise","title","setTitle","author","setAuthor","price","setPrice","books","setBooks","err","error","message","handlePayment","stripe","user","sessionStorage","getItem","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_c","$RefreshReg$"],"sources":["D:/NoteNest-Project/client/src/components/Billtocart.js"],"sourcesContent":["import { Elements } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { useEffect, useState } from 'react';\r\nimport CheckoutForm from './Checkoutform';\r\nimport { toast } from 'react-toastify';\r\nimport axios from 'axios';\r\n\r\nexport default function Billtocart({ totalquantity, totalamount, length }) {\r\n    const [stripePromise, setStripePromise] = useState(null);\r\n    const [title, setTitle] = useState({});\r\n    const [author, setAuthor] = useState({});\r\n    const [price, setPrice] = useState('');\r\n    const [books, setBooks] = useState([]);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if (price != '' && books != \"\") {\r\n            }\r\n            else {\r\n                throw ('cannot fetch data')\r\n            }\r\n        }\r\n        catch (err) {\r\n            toast.error(err.message);\r\n        }\r\n    })\r\n\r\n    const handlePayment = async () => {\r\n        try {\r\n            const stripe = await loadStripe('pk_test_51PYiEkLDujIwOUvsgGqFINeRQthKav2sU01n3IGgcRMOR981s19NQMZc3le1nZM55AVHq9bZkApwr52nFX2ue4xG005EATf0Rw');\r\n            const user = sessionStorage.getItem('username');\r\n//--------------------------------------------add books name function----------------------------------------------------------------------\r\n            // const response = await axios.post('http://localhost:3001/bill', { user });\r\n            // if (response.status === 200) {\r\n            // console.log(response.data);\r\n            // setBooks(response.data)\r\n            // const titles=books.map(item=>item.title);\r\n            // const authors=books.map(item=>item.author);\r\n            // response.data.forEach(item => {\r\n            //     titles[item.bookid]=item.title\r\n            //     authors[item.bookid]=item.author\r\n            // });\r\n            // setAuthor(authors);\r\n            // setTitle(titles);/\r\n            // console.log(title)\r\n            // console.log(titles)\r\n            // }\r\n            setStripePromise(stripe);\r\n        } catch (error) {\r\n            console.error('Error loading Stripe:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"card mb-3 mt-2\">\r\n            <div className=\"card-body\">\r\n                <p className=\"text-primary fs-5 fw-bold\">Price Details</p>\r\n                <div className=\"d-flex flex-row\">\r\n                    <p className=\"me-auto\">Price ({totalquantity} Books)</p>\r\n                    <p className=\"ms-auto\">Rs. {totalamount}</p>\r\n                </div>\r\n                <div className=\"d-flex flex-row\">\r\n                    <p className=\"me-auto\">Estimated Shipping</p>\r\n                    <p className=\"ms-auto\">Rs. {10 * length}</p>\r\n                </div>\r\n                <div className=\"d-flex flex-row\">\r\n                    <p className=\"me-auto\">Total</p>\r\n                    <p className=\"ms-auto\">Rs. {totalamount + (10 * length)}</p>\r\n                </div>\r\n\r\n                {stripePromise ? (\r\n                    <Elements className=\"container-fluid\" stripe={stripePromise} key={1} >\r\n                        <CheckoutForm price={totalamount + (10 * length)} />\r\n\r\n                    </Elements>\r\n                ) :\r\n                    (\r\n                        <button type=\"button\" className=\"btn btn-outline-danger p-3 mt-2\" onClick={handlePayment}>\r\n                            Proceed to checkout\r\n                        </button>\r\n                    )\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}